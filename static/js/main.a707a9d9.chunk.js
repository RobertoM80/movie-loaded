(this["webpackJsonpmovie-loaded"]=this["webpackJsonpmovie-loaded"]||[]).push([[0],{84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var r,a,c=n(1),i=n(15),o=n.n(i),s=(n(46),n(4)),l=n(5),u=n(12),d=n.n(u),j=n(2),b=n(16),p="FETCH_CHUCK",v="FETCH_YOUTUBE_MOVIE_START",m="FETCH_YOUTUBE_MOVIE_SUCCESS",f="FETCH_YOUTUBE_MOVIE_FAILURE",h="ACTIVATE_OVERLAY",O="UPDATE_VIEW",x="FETCH_MOVIE_START",y="FETCH_MOVIE_SUCCESS",g="FETCH_MOVIE_FAILURE",w=n(17),N=n.n(w),T=(new Date).getFullYear(),k="96e63474e758f0f3c342b883c6991953",E="&api_key=".concat(k),C=("discover/movie?primary_release_year=".concat(T,"&sort_by=vote_average.desc"),"movie/upcoming?api_key=".concat(k,"&language=en-US&page=1")),_="movie/top_rated?api_key=".concat(k,"&language=en-US&page=1"),I="https://api.themoviedb.org/3/configuration?api_key=".concat(k),M=(N.a.get(I).then((function(e){return e.data})).then((function(e){return r=e.images.secure_base_url,a=e.images.poster_sizes,e})),n(13)),A=n.p+"static/media/svgSprite.d08225b1.svg",S=n(0),U=Object(c.createContext)();function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initializeState,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"start update":return Object(j.a)(Object(j.a)({},e),{},{error:null,status:"pending"});case"finish update":return Object(j.a)(Object(j.a)({},e),{},{status:"resolved",temperature:t.payload.temperature,location:t.payload.location,icon:t.payload.icon,error:null});case"finish update":return Object(j.a)(Object(j.a)({},e),{},{error:t.payload,status:"rejected",temperature:"",location:"",icon:""});default:return e}}function R(e){var t=Object(c.useState)(""),n=Object(M.a)(t,2),r=n[0],a=n[1],i=Object(c.useReducer)(Y,{status:"idle",error:null,temperature:"",location:"",icon:""}),o=Object(M.a)(i,2),s=o[0],l=o[1],u=s.temperature,p=s.location,v=s.icon,m=s.status;function f(e){return h.apply(this,arguments)}function h(){return(h=Object(b.a)(d.a.mark((function e(t){var n,r,a,c,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.coords,r=n.latitude,a=n.longitude,"https://movie-loaded.herokuapp.com",c="latitude=".concat(r,"&longitude=").concat(a),"38cd89e1c279727b5a599e5804a22333",l({type:"start update"}),e.prev=5,e.next=8,N.a.get("".concat("https://movie-loaded.herokuapp.com","/api?api=weather&key=").concat("38cd89e1c279727b5a599e5804a22333","&").concat(c));case 8:i=e.sent,o=i.data,l({type:"finish update",payload:{temperature:o.currently.apparentTemperature,icon:o.currently.icon,location:o.timezone}}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0),l({type:"fail update",payload:e.t0});case 17:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}Object(c.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(f):l({type:"fail update",payload:"Geolocation is not supported by this browser."})}),[]),Object(c.useEffect)((function(){var e=(.5556*(u-32)).toFixed(1)||"cannot get temp",t=p.split("/")[1]||"cannot get city";a("".concat(e," C  -  ").concat(t))}),[u,p]);var O={display:r,weatherIcon:A+"#".concat(v||"clear-day"),status:m};return Object(S.jsx)(U.Provider,Object(j.a)({value:O},e))}function F(e){var t=e.weatherIcon,n=e.display;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("svg",{style:{width:"25px",height:"20px",marginRight:"5px"},children:Object(S.jsx)("use",{xlinkHref:t})}),n]})}U.displayName="WeatherContext";var L=function(e){var t=function(){if(void 0===Object(c.useContext)(U))throw new Error("useWeatherInfos must be used within a WeatherInfosProvider");return Object(c.useContext)(U)}(),n=t.display,r=t.weatherIcon,a=t.status;return Object(S.jsx)("p",{className:"weather d-flex align-item-center m-0",children:"pending"===a||"idle"===a?"...loading":"rejected"===a?"an error occured":Object(S.jsx)(F,{weatherIcon:r,display:n})})};var W=function(){var e=Object(c.useState)((new Date).toDateString()),t=Object(M.a)(e,1)[0];return Object(S.jsxs)("div",{className:"infos-container py-1 d-flex flex-row justify-content-center align-items-center",children:[Object(S.jsx)("p",{className:"date align-self-center m-0",children:t}),Object(S.jsx)("p",{className:"divider align-self-center m-0 mx-3",children:"|"}),Object(S.jsx)(R,{children:Object(S.jsx)(L,{})})]})},D=function(e){return Object(S.jsxs)("div",{className:"title",children:[Object(S.jsx)("h1",{className:"text-center",children:"Movie Loaded"}),Object(S.jsx)("h2",{className:"text-center",children:"Infos about your favourite movies"})]})},H=n(11);var B=function(){return Object(S.jsxs)("nav",{className:"links-container d-flex flex-row justify-content-start align-items-center",children:[Object(S.jsx)("p",{className:"m-0 mx-2",children:Object(S.jsx)(H.b,{className:"",to:"/upcoming",children:"Best Movies"})})," ","|",Object(S.jsx)("p",{className:"m-0 mx-2",children:Object(S.jsx)(H.b,{className:"",to:"/rated",children:"High Rate"})})," ","|",Object(S.jsx)("p",{className:"m-0 mx-2",children:Object(S.jsx)(H.b,{className:"",to:"/popular",children:"Popular"})})]})};n(84);n(85);var P=function(){return Object(S.jsx)("div",{className:"navbar-container py-1 d-flex flex-row justify-content-between",children:Object(S.jsx)(B,{})})};n(86);var V=function(){return Object(S.jsxs)("header",{children:[Object(S.jsx)(D,{}),Object(S.jsx)(W,{}),Object(S.jsx)(P,{})]})},z=n.p+"static/media/heartLoader.46fd28c5.svg",q=function(e){return e.loading?Object(S.jsx)("div",{className:"showLoader d-flex flex-column justify-content-center align-items-center",children:Object(S.jsx)("img",{style:{width:"100px"},src:z})}):Object(S.jsx)("div",{className:"noLoader"})};var J=function(){return Object(S.jsxs)("div",{className:"py-3 my-2",children:[Object(S.jsx)("hr",{}),Object(S.jsxs)("h2",{children:["for this h2roject we used and thank loading.io, ",Object(S.jsx)("br",{}),"darksky.net,",Object(S.jsx)("br",{}),"themoviedb.org"]})]})},G=n(36),K=n(37),Q=n(41),X=n(40),$=function(e){Object(Q.a)(n,e);var t=Object(X.a)(n);function n(e){var r;return Object(G.a)(this,n),(r=t.call(this,e)).state={place:r.props.place,hasError:!1},r}return Object(K.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{hasError:!0})}))}},{key:"render",value:function(){return this.state.hasError?Object(S.jsxs)("div",{children:["Sorry, something wasn't quite right in ",this.state.place," section!"," "]}):this.props.children}}]),n}(c.Component),Z=function(e,t){return e.split(" ").slice(0,t).join(" ")};n(87);var ee=function(e){var t=e.index,n=e.movie,c=Object(l.b)();function i(e){c((function(e){e({type:h,payload:{isActiveOverlay:!0,wichAnimation:"fadeInLeftBig"}})})),c(function(e){return function(){var t=Object(b.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v,payload:!0}),t.next=4,N.a.get("".concat("https://www.googleapis.com/youtube/v3/","search?q=").concat(e," trailer official&maxResults=1&part=snippet&key=").concat("AIzaSyDsTb3fhXB01D5yjfjFooWgNnNxDlrjWpo"));case 4:r=t.sent,a=r.data.items[0].id.videoId,n({type:m,payload:{currentYoutubeTrailerMovieId:a,currentYoutubeTrailerMovieTitle:e}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:f,payload:{type:null,error:t.t0}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(e))}function o(e){return encodeURIComponent(e.split(" ").join("-").toLowerCase())}return Object(S.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-4 my-3",children:Object(S.jsxs)("div",{className:"container-fluid d-flex px-0",children:[Object(S.jsx)("div",{className:"img-container",children:Object(S.jsx)("img",{src:r+a[1]+n.poster_path,alt:"poster image",className:"rounded poster-image"})}),Object(S.jsxs)("div",{className:"movie-info px-3 d-flex flex-column justify-content-around",children:[Object(S.jsx)("h2",{className:"movie--title",children:n.title}),Object(S.jsxs)("div",{className:"description",children:[Object(S.jsxs)("p",{className:"d-lg-none d-xl-block",children:[Z(n.overview,20),"...",Object(S.jsx)(H.b,{className:"",to:"/movie/details/"+o(n.title),children:"[continue]"})]}),Object(S.jsxs)("p",{className:"d-none d-lg-block d-xl-none",children:[Z(n.overview,10),"...",Object(S.jsx)(H.b,{className:"",to:"/movie/details/"+o(n.title),children:"[continue]"})]})]}),Object(S.jsxs)("div",{className:"btn-group btn-group-sm mr-auto",role:"group","aria-label":"Basic example",children:[Object(S.jsx)("button",{type:"button",className:"btn btn-sm btn-warning",onClick:function(){return i(n.title)},children:"Watch Trailer"}),Object(S.jsx)(H.b,{className:"",to:"/movie/details/"+o(n.title),children:Object(S.jsx)("button",{type:"button",className:"btn btn-sm btn-info",children:"Read More"})})]})]})]})},t.toString())};function te(){var e=Object(l.c)((function(e){return e.overlay.wichAnimation})),t=Object(l.b)(),n=function(){return t((function(e){e({type:h,payload:{isActiveOverlay:!0,wichAnimation:"fadeOutRightBig"}}),setTimeout((function(){e({type:h,payload:{isActiveOverlay:!1,wichAnimation:""}})}),300)}))},r=Object(c.useRef)(document.createElement("div"));function a(e){e.target.className.indexOf("overlay-container")>-1&&n()}return Object(c.useEffect)((function(){return r.current.className="overlay-container d-flex justify-content-center align-items-center",r.current.addEventListener("click",(function(e){return a(e)})),document.body.appendChild(r.current),function(){r.current.removeEventListener("click",(function(e){return a(e)})),document.body.removeChild(r.current)}}),[]),{wichAnimation:e,overlayContainer:r,closeDialog:n}}var ne=n.p+"static/media/close.6e9b2c81.png";n(88);var re=function(e){var t=e.children,n=te(),r=n.wichAnimation,a=n.overlayContainer,c=n.closeDialog;return o.a.createPortal(Object(S.jsxs)("div",{className:"overlay animated "+r,children:[Object(S.jsx)("div",{className:"card-header",children:Object(S.jsx)("span",{onClick:function(e){return c()},className:"float-right",children:Object(S.jsx)("img",{src:ne,alt:"close button",className:"img-fluid cose-btn"})})}),Object(S.jsx)("div",{className:"card-body",children:t})]}),a.current)};function ae(){var e=Object(c.useState)([]),t=Object(M.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(M.a)(a,2),o=i[0],u=i[1],d=Object(s.g)(),j=Object(l.c)((function(e){return e.movies.popular})),b=Object(l.c)((function(e){return e.movies.upcoming})),p=Object(l.c)((function(e){return e.movies.rated})),v=Object(l.c)((function(e){return e.trailer.currentYoutubeTrailerMovieId})),m=Object(l.c)((function(e){return e.trailer.currentYoutubeTrailerMovieTitle})),f=d.pathname.substr(1);return Object(c.useEffect)((function(){var e=n.filter((function(e){return e.title===m}))[0];u(e)}),[m]),Object(c.useEffect)((function(){r({popular:j,upcoming:b,rated:p}[f])}),[d,j,b,p]),{active:f,movies:n,activeMovie:o,currentYoutubeTrailerMovieTitle:m,currentYoutubeTrailerMovieId:v}}var ce=function(){var e=ae(),t=(e.active,e.movies,e.activeMovie),n=(e.currentYoutubeTrailerMovieTitle,e.currentYoutubeTrailerMovieId);return Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-5",children:t&&Object(S.jsxs)("div",{className:"overlay-trailer-infos",children:[Object(S.jsx)("img",{src:r+a[4]+t.backdrop_path,alt:"poster image",className:"rounded poster-image img-fluid d-none d-lg-block"}),Object(S.jsx)("h3",{className:"my-3 d-none d-sm-block",children:t.title}),Object(S.jsx)("p",{className:"d-none d-md-block d-lg-block d-xl-block",children:t.overview}),Object(S.jsxs)("p",{className:"d-none d-sm-block d-md-none",children:[Z(t.overview,10),"..."]})]})}),Object(S.jsx)("div",{className:"col-sm-7",children:Object(S.jsx)("div",{dangerouslySetInnerHTML:{__html:'\n    <iframe \n      style="width:45vw;height:25vw" \n      src="https://www.youtube.com/embed/'.concat(n,'" \n      frameborder="0" \n      allow="autoplay; \n      encrypted-media"\n      allowfullscreen\n    ></iframe>')}})})]})})};var ie=function(e){var t=ae(),n=t.active,r=t.movies,a=Object(l.c)((function(e){return e.overlay.isOverlayActive})),c="".concat(n[0].toUpperCase()).concat(n.substr(1)," Movies...");return Object(S.jsx)($,{place:"Popular",children:Object(S.jsxs)("div",{className:"latest-movies",children:[a&&Object(S.jsx)(re,{children:Object(S.jsx)(ce,{})}),Object(S.jsx)("h3",{className:"text-center mt-2 mb-4",children:c}),Object(S.jsx)("div",{className:"row",children:r.length>0?r.map((function(e,t){return Object(S.jsx)(ee,{index:t,movie:e},e.title)})):Object(S.jsx)("h1",{children:"No Movies"})})]})})};var oe=function(e){var t=e.match;return Object(S.jsxs)("div",{children:[t.params.id," - UNDER CONSTRUCTION .... "]})};n(89);var se=function(){var e=Object(l.c)((function(e){return e.movies.status})),t=["pending","idle"].includes(e),n=Object(l.b)(),r=Object(s.g)().pathname;return Object(c.useEffect)((function(){try{n(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={upcoming:C,rated:_,popular:"discover/movie?sort_by=popularity.desc"},t({type:x}),r=Object.values(n).map((function(e){return new Promise(function(){var t=Object(b.a)(d.a.mark((function t(r,a){var c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("https://api.themoviedb.org/3/"+e+E);case 2:c=t.sent,i=c.data.results,r(Object(j.a)(Object(j.a)({},i),{},{type:Object.keys(n).find((function(t){return n[t]===e}))}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),e.next=6,Promise.allSettled(r);case 6:e.sent.map((function(e){var n="fulfilled"===e.status,r=e.value.type,a=Object.values(e.value).filter((function(e){return"string"!=typeof e}));t(n?{type:y,payload:{type:r,movies:a}}:{type:g,payload:{type:r,error:"Impossible to retreive ".concat(r," movies")}})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),t({type:g,payload:{type:null,error:e.t0}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}catch(e){console.info(e)}}),[]),Object(c.useEffect)((function(){var e=r.substr(1);n(function(e){return function(t){t({type:O,payload:{view:e}})}}(e))}),[r]),Object(S.jsxs)("div",{className:"App container-fluid",children:[Object(S.jsx)(q,{loading:t}),Object(S.jsx)(V,{}),Object(S.jsxs)(s.d,{children:[Object(S.jsx)(s.b,{exact:!0,path:"/",render:function(){return Object(S.jsx)(s.a,{to:"/popular"})}}),Object(S.jsx)(s.b,{path:["/popular","/rated","/upcoming"],component:ie}),Object(S.jsx)(s.b,{path:"/movie/details/:id",component:oe}),Object(S.jsx)(s.b,{render:function(){return Object(S.jsx)("h1",{className:"text-center",children:"404 - Page Not Found!"})}})]}),Object(S.jsx)(J,{})]})},le=n(14),ue=n(38),de=n(39),je={value:"",image:""},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(j.a)(Object(j.a)({},e),{},{value:t.payload.value,image:t.payload.image});default:return e}},pe=n(19),ve={status:"idle",active:null,popular:[],rated:[],upcoming:[],error:null},me=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case x:return Object(j.a)(Object(j.a)({},t),{},{status:"pending",error:null});case y:return Object(j.a)(Object(j.a)({},t),{},(e={status:"success"},Object(pe.a)(e,n.payload.type,n.payload.movies),Object(pe.a)(e,"error",null),e));case g:return Object(j.a)(Object(j.a)({},t),{},{status:"failure",error:n.payload.error});case O:return Object(j.a)(Object(j.a)({},t),{},{active:n.payload.view});default:return t}},fe={isOverlayActive:!1,animateInOut:""},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(j.a)(Object(j.a)({},e),{},{isOverlayActive:t.payload.isActiveOverlay,wichAnimation:t.payload.wichAnimation});default:return e}},Oe={status:"idle",error:null,currentYoutubeTrailerMovieId:"",currentYoutubeTrailerMovieTitle:""},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(j.a)(Object(j.a)({},e),{},{error:null,status:"pending"});case m:return Object(j.a)(Object(j.a)({},e),{},{error:null,status:"success",currentYoutubeTrailerMovieId:t.payload.currentYoutubeTrailerMovieId,currentYoutubeTrailerMovieTitle:t.payload.currentYoutubeTrailerMovieTitle});case f:return Object(j.a)(Object(j.a)({},e),{},{error:t.payload.error,status:"failure"});default:return e}},ye=[de.a],ge=Object(le.combineReducers)({chuckNorris:be,movies:me,trailer:xe,overlay:he}),we=Object(le.createStore)(ge,{},Object(ue.composeWithDevTools)(le.applyMiddleware.apply(void 0,ye))),Ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Te(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(S.jsx)(l.a,{store:we,children:Object(S.jsx)(H.a,{hashType:"slash",basename:"/movie-loaded",children:Object(S.jsx)(se,{})})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/movie-loaded",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/movie-loaded","/service-worker.js");Ne?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Te(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Te(e)}))}}()}},[[90,1,2]]]);
//# sourceMappingURL=main.a707a9d9.chunk.js.map